$((function(){$("ul[name='thumbList']").each((function(){var imgwid=109;var type=$(this).attr("type");if(type=="photo"){var width=$(this).find("li").length;$(this).attr("style","width:"+width*imgwid+"px;")}}));$(".catalogBox .cont #catalogZoom").live("click",(function(e){$(".catalogBox .cont img").trigger("click")}));$(".catalogBox .cont img").live("click",(function(e){var imgSrc=$(this).attr("src").replace("-m.","-b.");var imgW=$(this).attr("bigImgW");var imgH=$(this).attr("bigImgH");var txt='<div style="width:'+imgW+"px;height:"+imgH+"px;background:url("+imgSrc+') no-repeat 50% 50%;margin:0 auto;" id="BimgBg">';$("#catalogData").css("height",$(window).height()-40);$("#catalogData").html(txt);if(!window.location.hash||window.location.hash.indexOf("gallery")<0)window.location.hash=window.location.hash+"gallery";$("#catalog_popup").removeClass("off")}));$(document).on("click","#catalog_popup .close,#catalog_popup .bg",(function(){history.back(-1);$("#catalog_popup").addClass("off")}));var dragFlag=false;var x,y,pre_x,pre_y;var mov=0;$("#catalogData").live("mousedown",(function(e){dragFlag=true;var obj=$(this);x=obj.scrollLeft();y=obj.scrollTop();pre_x=e.screenX;pre_y=e.screenY;$(this).css("cursor","pointer");mov=0}));$("#catalogData").live("mousemove",(function(e){if(dragFlag){var obj=$(this);obj.scrollLeft(x-e.screenX+pre_x);obj.scrollTop(y-e.screenY+pre_y);mov=1}}));$("#catalogData").live("mouseup",(function(){dragFlag=false;$(this).css("cursor","default");if(mov==0){history.back(-1);$("#catalog_popup").addClass("off")}}));$("body").mouseup((function(){dragFlag=false;$(this).css("cursor","default");if(mov==0){$("#catalog_popup").addClass("off")}}));$(document).on("click","ul[name='thumbList'] li",(function(){var type=$(this).parent().attr("type");var thisObj=$(this).closest("div[name='galleryBox']");if(type=="photo"){cp="_s.jpg";rp=".jpg";CP="_s.JPG";RP=".JPG"}else if(type=="catalog"){cp="-s.jpg";rp="-m.jpg"}else{cp="-s.jpg";rp="-m.jpg"}if(type=="movie"){var mval=$(this).attr("no");thisObj.find("ul[name='thumbList'] li").removeClass("on");$(this).addClass("on");thumbListFocus(mval,thisObj);var altval=$(this).find("img").attr("alt");altTmp=altval.split(",");getHttprequest("/gallery/movie_No.php?Model="+altTmp[0]+"&MovieNo="+altTmp[1],"galleryWrap")}else{newImg=$(this).find("img").attr("src").replace(cp,rp);if(type=="photo"){newImg=newImg.replace(CP,RP);newImg=newImg.replace("?fitting=Large|140:105&crop=140:105;*,*","?resize=800:*");thisObj.find("div[name='galleryComment']").text($(this).find("img").attr("alt"))}thisObj.find("ul[name='thumbList'] li").removeClass("on");$(this).addClass("on");thisObj.find("div[name='galleryMain'] img").attr("src",newImg);var mval=$(this).attr("no");if(type=="catalog"||type=="photo"){thisObj.find("span[name='currentIndex']").html(mval)}thumbListFocus(mval,thisObj)}}));$(document).on("click","button[name='catal_Btn']",(function(){var thisObj=$(this).closest("div[name='galleryBox']");var val=$(this).attr("val");var currentVal=thisObj.find("ul[name='thumbList'] li.on").attr("no");var width=thisObj.find("ul[name='thumbList'] li").length;var type=thisObj.attr("type");if(val=="pp"){val=0}else if(val=="nn"){val=parseInt(width)-1}else{val=parseInt(currentVal)+parseInt(val)-1}if(val<0){if(type=="catalog"||type=="photo"){thisObj.find("span[name='currentIndex']").html(width)}if(type=="movie"){var altval=thisObj.find("ul[name='thumbList'] li").eq(width-1).find("img").attr("alt");thisObj.find("ul[name='thumbList'] li").removeClass("on");thisObj.find("ul[name='thumbList'] li").eq(width-1).addClass("on");altTmp=altval.split(",");getHttprequest("/gallery/movie_No.php?Model="+altTmp[0]+"&MovieNo="+altTmp[1],"galleryWrap");thumbListFocus(width,thisObj)}else{if(type=="photo"){cp="_s.jpg";rp=".jpg";CP="_s.JPG";RP=".JPG"}else if(type=="catalog"){cp="-s.jpg";rp="-m.jpg"}else if(gnb=="usedcar"){cp="_thumb.jpg";rp=".jpg"}else{cp="-s.jpg";rp="-m.jpg"}newImg=thisObj.find("ul[name='thumbList'] li").eq(width-1).find("img").attr("src").replace(cp,rp);if(type=="photo"){newImg=newImg.replace(CP,RP);newImg=newImg.replace("?fitting=Large|140:105&crop=140:105;*,*","?resize=800:*");thisObj.find("div[name='galleryComment']").text(thisObj.find("ul[name='thumbList'] li").eq(width-1).find("img").attr("alt"))}thisObj.find("ul[name='thumbList'] li").removeClass("on");thisObj.find("ul[name='thumbList'] li").eq(width-1).addClass("on");thisObj.find("div[name='galleryMain'] img").attr("src",newImg);thumbListFocus(width,thisObj)}}else if(val>width-1){if(type=="catalog"||type=="photo"){thisObj.find("span[name='currentIndex']").html(0+1)}if(type=="movie"){var altval=thisObj.find("ul[name='thumbList'] li").eq(0).find("img").attr("alt");thisObj.find("ul[name='thumbList'] li").removeClass("on");thisObj.find("ul[name='thumbList'] li").eq(0).addClass("on");altTmp=altval.split(",");getHttprequest("/gallery/movie_No.php?Model="+altTmp[0]+"&MovieNo="+altTmp[1],"galleryWrap");thumbListFocus(0+1,thisObj)}else{if(type=="photo"){cp="_s.jpg";rp=".jpg";CP="_s.JPG";RP=".JPG"}else if(type=="catalog"){cp="-s.jpg";rp="-m.jpg"}else if(gnb=="usedcar"){cp="_thumb.jpg";rp=".jpg"}else{cp="-s.jpg";rp="-m.jpg"}newImg=thisObj.find("ul[name='thumbList'] li").eq(0).find("img").attr("src").replace(cp,rp);if(type=="photo"){newImg=newImg.replace(CP,RP);newImg=newImg.replace("?fitting=Large|140:105&crop=140:105;*,*","?resize=800:*");thisObj.find("div[name='galleryComment']").text(thisObj.find("ul[name='thumbList'] li").eq(0).find("img").attr("alt"))}thisObj.find("ul[name='thumbList'] li").removeClass("on");thisObj.find("ul[name='thumbList'] li").eq(0).addClass("on");thisObj.find("div[name='galleryMain'] img").attr("src",newImg);thumbListFocus(0+1,thisObj)}}else{if(type=="catalog"||type=="photo"){thisObj.find("span[name='currentIndex']").html(val+1)}if(type=="movie"){var altval=thisObj.find("ul[name='thumbList'] li").eq(val).find("img").attr("alt");thisObj.find("ul[name='thumbList'] li").removeClass("on");thisObj.find("ul[name='thumbList'] li").eq(val).addClass("on");altTmp=altval.split(",");getHttprequest("/gallery/movie_No.php?Model="+altTmp[0]+"&MovieNo="+altTmp[1],"galleryWrap");thumbListFocus(val+1,thisObj)}else{if(type=="photo"){cp="_s.jpg";rp=".jpg";CP="_s.JPG";RP=".JPG"}else if(type=="catalog"){cp="-s.jpg";rp="-m.jpg"}else if(gnb=="usedcar"){cp="_thumb.jpg";rp=".jpg"}else{cp="-s.jpg";rp="-m.jpg"}newImg=thisObj.find("ul[name='thumbList'] li").eq(val).find("img").attr("src").replace(cp,rp);if(type=="photo"){newImg=newImg.replace(CP,RP);newImg=newImg.replace("?fitting=Large|140:105&crop=140:105;*,*","?resize=800:*");thisObj.find("div[name='galleryComment']").text($("ul[name='thumbList'] li").eq(val).find("img").attr("alt"))}thisObj.find("ul[name='thumbList'] li").removeClass("on");thisObj.find("ul[name='thumbList'] li").eq(val).addClass("on");thisObj.find("div[name='galleryMain'] img").attr("src",newImg);thumbListFocus(val+1,thisObj)}}}))}));function thumbListFocus(mval,thisObj){if(thisObj.find(".typeH").attr("class")){var a=(thisObj.find("ul[name='thumbList'] li").eq(0).width()+4)*parseInt(mval);var b=960/2+90;c=a-b;thisObj.find("ul[name='thumbList']").parent(".list").animate({scrollLeft:c},500);thisObj.find("span[name='currentIndex']").html(mval)}else if(thisObj.find(".typeV").attr("class")){var a=(thisObj.find("ul[name='thumbList'] li").eq(0).height()+2)*parseInt(mval);var b=160/2+135;c=a-b;thisObj.find("ul[name='thumbList']").parent(".list").animate({scrollTop:c},500);thisObj.find("span[name='currentIndex']").html(mval)}else{var a=(thisObj.find("ul[name='thumbList'] li").eq(0).width()+4)*parseInt(mval);var b=960/2+50;c=a-b;thisObj.find("ul[name='thumbList']").parent(".list").animate({scrollLeft:c},500)}}