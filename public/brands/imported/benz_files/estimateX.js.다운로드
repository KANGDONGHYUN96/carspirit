css=new Array;css.lineDiv="line-height: 20%;";css.head="margin-top: 10px;";css.headT="width: 640px;";css.foot="margin-top: 10px;";css.footT="width: 640px";css.subj="margin-top: 10px;";css.subjT="font-size: 24px;font-weight: bold;text-align: center;letter-spacing: 10px;";css.subjPut="font-size: 24px;font-weight: bold;text-align: center;letter-spacing: 10px;width: 400px;";css.date="margin-top: 10px;height: 21px;";css.dateT="font-size: 14px;font-weight: bold;";css.dateTPut="font-size: 14px;font-weight: bold;width: 300px";css.dateD="font-size: 12px;float: right;";css.dateDPut="font-size: 12px;text-align: right;width: 100px";css.estm="margin-top: 10px;";css.estmT="font-size: 12px;";css.estmTPut="font-weight: bold;font-size: 12px;width: 450px;";css.cost="margin-top: 10px;";css.base="margin-top: 10px;font-size: 12px;";css.basePut="width: 99%;height: 100px;overflow: visible";css.sale="margin-top: 10px;font-size: 12px;";css.salePut="width: 99%;height: 50px;overflow: visible";css.spec="margin-top: 10px;font-size: 12px;";css.specPut="width: 99%;height: 100px;overflow: visible";css.othr="margin-top: 10px;font-size: 12px;";css.othrPut="width: 99%;height: 100px;overflow: visible";css.docu="margin-top: 10px;font-size: 12px;";css.docuPut="width: 99%;height: 50px;overflow: visible";css.itro="margin-top: 10px;background-color: rgb(243,243,243);";css.itroT="font-size: 12px;line-height: 15px;";css.itroH="font-size: 14px;padding: 5px;line-height: 18px;";css.itroC="font-size: 12px;line-height: 15px;";css.itroTPut="font-size: 12px;width: 99%;height: 50px;overflow: visible;text-align: center;";css.itroHPut="font-size: 14px;font-weight: bold;width: 170px;text-align: center;";css.itroCPut="font-size: 14px;width: 99%;height: 50px;overflow: visible;text-align: center;";css.compTPut="font-size: 12px;width: 98%;height: 50px;overflow: visible;text-align: center;font-weight: bold";css.Bg_white="background-color: rgb(255,255,255);";css.Bg_gray="background-color: rgb(243,243,243);";css.Table_LOPO='cls="Table_LOPO" border="0" cellspacing="1" cellpadding="0" bgcolor="#aaaaaa"';css.Table_LXPX='cls="Table_LXPX" border="0" cellspacing="0" cellpadding="0"';css.Table_LXPO='cls="Table_LXPO" border="0" cellspacing="0" cellpadding="0"';css.Table_LXPO2='cls="Table_LXPO2" border="0" cellspacing="0" cellpadding="0"';css.Table_LXPO3='cls="Table_LXPO2" border="0" cellspacing="0" cellpadding="0"';css.Table_LOPX='cls="Table_LOPX" border="0" cellspacing="1" cellpadding="0" bgcolor="#aaaaaa"';css.Td_LOPO="padding: 4px;";css.Td_LXPX="padding: 0px;";css.Td_LXPO="padding: 2px;";css.Td_LXPO2="padding: 4px;";css.Td_LXPO3="padding: 10px;";css.Td_LOPX="padding: 0px;";css.Font_small="font-size: 11px;line-height: 15px;font-family: 돋움;letter-spacing: 0;color: rgb(50,50,50);";css.Font_base="font-size: 12px;line-height: 18px;font-family: 돋움;letter-spacing: 0;color: rgb(50,50,50);";css.Font_large="font-size: 14px;line-height: 20px;font-family: 돋움;letter-spacing: 0;color: rgb(50,50,50);";css.Font_Xlarge="font-size: 24px;line-height: 30px;font-family: 돋움;letter-spacing: 0;color: rgb(50,50,50);";var useCall=false;var fIValCode;var fIPrice;$((function(){$(document).on("click","#requestSubmit, .estmBtnNext button,.estmRsltTop .btn button, button[name='requestSubmit']",(function(){if($.cookie("dasysMSeq")){if($.cookie("dasysMcut")){if($.cookie("dasysMcut").indexOf("M")>-1||$.cookie("dasysMcut").indexOf("m")>-1){alert("본 계정은 신고 접수로 인해 견적문의가 제한되었습니다.\n다나와자동차 고객센터 1644-3834(유료)로 문의 해주세요.");return false}}}useCall=false;var job=$(this).attr("job");if(!mobile){var loggerMobile="(웹)"}else{var loggerMobile="(모바일)"}switch($(this).parent().parent().index()){case 1:if(job=="view"){eval("try{ _trk_clickTrace( 'EVT', '자동차_백과_견적서생성_일시불"+loggerMobile+"' ); }catch(_e){ }")}else if(job=="request"){eval("try{ _trk_clickTrace( 'EVT', '자동차_백과_상담신청_일시불"+loggerMobile+"' ); }catch(_e){ }")}else if(job=="requestDirect"){eval("try{ _trk_clickTrace( 'EVT', '자동차_백과_통합상담신청"+loggerMobile+"' ); }catch(_e){ }")}break;case 2:if(job=="view"){eval("try{ _trk_clickTrace( 'EVT', '자동차_백과_견적서생성_할부"+loggerMobile+"' ); }catch(_e){ }")}else if(job=="request"){eval("try{ _trk_clickTrace( 'EVT', '자동차_백과_상담신청_할부"+loggerMobile+"' ); }catch(_e){ }")}break;case 3:if(job=="view"){eval("try{ _trk_clickTrace( 'EVT', '자동차_백과_견적서생성_리스"+loggerMobile+"' ); }catch(_e){ }")}else if(job=="request"){eval("try{ _trk_clickTrace( 'EVT', '자동차_백과_상담신청_리스"+loggerMobile+"' ); }catch(_e){ }")}break;case 4:if(job=="view"){eval("try{ _trk_clickTrace( 'EVT', '자동차_백과_견적서생성_렌트"+loggerMobile+"' ); }catch(_e){ }")}else if(job=="request"){eval("try{ _trk_clickTrace( 'EVT', '자동차_백과_상담신청_렌트"+loggerMobile+"' ); }catch(_e){ }")}break;default:break}if(job=="requestDirect"||job=="simulation"){if(emod=="single"){var eNo="1"}else{var eNo=$(this).parent().parent().attr("id").substring(5)}ftab=$(this).attr("ftab");job="request";useCall=true}else if(job=="popupRequest"){var eNo="1";job="request";var userCode=$.cookie("dasysMSeq");var carModel=$("#scriptModel").val();var carModelName=$("div.estimate-model__img img").attr("alt");var logKeyword="P27001";if(mobile){logKeyword="M27001"}if(userCode!=null){sendUXLOG(logKeyword,{modelCode:carModel,modelName:carModelName})}var deviceType="PC";if(typeof deviceOS!="undefined"){deviceType="MO";if(typeof deviceVer!="undefined"){if(deviceVer!=0){deviceType="App"}}}if($("#usePopRequestLayer").val()!="Y"){eval("try{ _trk_clickTrace( 'EVT', '"+deviceType+"_신차견적_견적페이지_상담신청클릭' ); }catch(_e){ }")}}else if(job=="campaignCoupon"){}else if($(this).parent().parent().hasClass("estmRsltTop")){}else if(gnb=="buy"||gnb=="newcar"&&job!="simulation"||gnb=="estimate"){}else if(gnb=="compare"){var eNo=0;if($(this).parent().parent().hasClass("fincinfo_wrap")){eNo=$(this).parent().parent().parent().attr("id").substring(5);ftab=$("#Finc_"+eNo+" .selectFincTab").val()}else{eNo=$(this).parent().parent().attr("id").substring(5);ftab=$("#Finc_"+eNo+" .fincTab > li.on").attr("ftab")}}estmAct=eNo;ebox=estmAct;if(ftab=="LeasS"){}else if(ftab=="RentS"){}if(job=="view"){if(ftab=="CashS"||ftab=="FincS"){if($.cookie("dasysMSeq")){var txt="";rsltOthr[eNo]+="fince_installmentPrincipal^"+$("#Finc_"+eNo+" .installmentPrincipal").val();rsltOthr[eNo]+="#fince_installmentMonth^"+$("#Finc_"+eNo+" .installmentMonth").val();rsltOthr[eNo]+="#fince_rate^"+$("#Finc_"+eNo+" .rate").val();rsltOthr[eNo]+="#fince_monthlyPayment^"+$("#Finc_"+eNo+" .monthlyPayment").val();txt+='<input type="text" name="Code" value="'+rsltCode[eNo]+'" />';txt+='<input type="text" name="Conf" value="'+rsltConf[eNo]+'" />';txt+='<input type="text" name="Name" value="'+rsltName[eNo]+'" />';txt+='<input type="text" name="Othr" value="'+rsltOthr[eNo]+'" />';if(ftab=="FincS"){txt+='<input type="text" name="Fcfg" value="'+rsltFcfg[eNo]+'" />';txt+='<input type="text" name="Wfom" value="Nf" />'}else{txt+='<input type="text" name="Fcfg" value="" />';txt+='<input type="text" name="Wfom" value="Nc" />'}txt+='<input type="text" name="Wjob" value="view" />';$("#estmWorks").html(txt);$("#estmWorks").attr("action",webUrl+"/service/ajax_estimate_action.php");ajaxSubmit("estmWorks")}else{var date=new Date;date.setTime(date.getTime()+1*600*1e3);$.cookie("loginType","true",{expires:date,path:"/",domain:".danawa.com"});loginPopup()}}else if(ftab=="LeasS"||ftab=="RentS"){}else{alert("결제방법을 선택해주세요.");return 0}}else if(job=="request"){if(gnb=="compare"){if(!financialInstrumentsCheck(eNo)){alert("결제방법을 선택해주세요.");return 0}}if($.cookie("dasysMSeq")){if(ftab=="LeasS"||ftab=="RentS"){estmWorkRslt(job,fNo+"_"+vNo,ftab)}else if(typeof brand!="undefined"&&brand=="611"){estmWorkRslt("tesla",0,0)}else if(codes.code.substring(3,7)=="4086"){estmWorkRslt("casper",0,0)}else if(codes.code.substring(3,7)=="4653"){estmWorkRslt("casperEV",0,0)}else{var txt="";if($("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type")=="finance"){var financialInstallmentPrincipal=$("#financialInstrument #installmentPrincipal").val();var financialInstallmentMonth=$("#financialMonth option:selected").val();var financialInstallmentRate=$("#financialInstrument .tab-box__item--on #installmentRate").attr("rate");var financialInstallmentPayment=$("#financialInstrument .tab-box__item--on #installmentPrice").attr("price");rsltOthr[eNo]+="fince_installmentPrincipal^"+financialInstallmentPrincipal;rsltOthr[eNo]+="#fince_installmentMonth^"+financialInstallmentMonth;rsltOthr[eNo]+="#fince_rate^"+financialInstallmentRate;rsltOthr[eNo]+="#fince_monthlyPayment^"+financialInstallmentPayment}else if($("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type")=="cash"){var cashRate=$("#financialInstrument .payinfo-box.payinfo-box--on input[id^='financialCheckBox']").data("rate");var cashTxt=$("#financialInstrument .payinfo-box.payinfo-box--on label").text();var cashPayment=$("#financialInstrument .tab-box__item--on #fullPaymentPrice").attr("price");rsltOthr[eNo]+="#cash_txt^"+cashTxt;rsltOthr[eNo]+="#cash_rate^"+cashRate;rsltOthr[eNo]+="#cash_monthlyPayment^"+cashPayment}txt+='<input type="text" name="Code" value="'+rsltCode[eNo]+'" />';txt+='<input type="text" name="Conf" value="'+rsltConf[eNo]+'" />';txt+='<input type="text" name="Name" value="'+rsltName[eNo]+'" />';txt+='<input type="text" name="Othr" value="'+rsltOthr[eNo]+'" />';var selectedTab=$("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type");if(selectedTab=="finance"){txt+='<input type="text" name="Fcfg" value="'+rsltFcfg[eNo]+'" />';txt+='<input type="text" name="Wfom" value="Nf" />'}else{txt+='<input type="text" name="Fcfg" value="" />';txt+='<input type="text" name="Wfom" value="Nc" />'}txt+='<input type="text" name="Wjob" value="request" />';$("#estmWorks").html(txt);if(bIsReal==true&&mobile){$("#estmWorks").attr("action",mobileWebUrl+"/service/ajax_estimate_action.php")}else{$("#estmWorks").attr("action",webUrl+"/service/ajax_estimate_action.php")}$("#estmWorks").attr("target","");if(gnb=="compare"){var deviceType="PC";if(typeof deviceOS!="undefined"){deviceType="MO";if(typeof deviceVer!="undefined"){if(deviceVer!=0){deviceType="App"}}}sendGAExcpt(deviceType+"_신차견적_견적페이지","상담신청클릭_모델비교유입","");eval("try{ _trk_clickTrace( 'EVT', '"+deviceType+"_신차견적_견적페이지_상담신청클릭_모델비교유입' ); }catch(_e){ }")}ajaxSubmit("estmWorks")}}else{var date=new Date;date.setTime(date.getTime()+1*600*1e3);$.cookie("loginType","true",{expires:date,path:"/",domain:".danawa.com"});if(emod=="single"){var url="";if(mobile){url=$("#metaUrl").val()}else{url=$("meta[property='og:url']").attr("content")}if(!$.cookie("dasysMSeq")){url+="&popRequestLayer=Y"}var loginUrl=webUrl+"/social/connect.php?site=combine&returnUrl="+encodeURIComponent(url);var txt="";txt+='<input type="text" name="Code" value="'+rsltCode[eNo]+'" />';txt+='<input type="text" name="Conf" value="'+rsltConf[eNo]+'" />';txt+='<input type="text" name="Name" value="'+rsltName[eNo]+'" />';txt+='<input type="text" name="Othr" value="'+rsltOthr[eNo]+'" />';if(ftab=="FincS"){txt+='<input type="text" name="Fcfg" value="'+rsltFcfg[eNo]+'" />';txt+='<input type="text" name="Wfom" value="Nf" />'}else{txt+='<input type="text" name="Fcfg" value="" />';txt+='<input type="text" name="Wfom" value="Nc" />'}txt+='<input type="text" name="Wjob" value="request" />';txt+='<input type="text" name="LoginUrl" value="'+loginUrl+'" />';$("#estmWorks").html(txt);if(bIsReal==true&&mobile){$("#estmWorks").attr("action",mobileWebUrl+"/service/ajax_estimate_action.php")}else{$("#estmWorks").attr("action",webUrl+"/service/ajax_estimate_action.php")}$("#estmWorks").attr("target","");ajaxSubmit("estmWorks")}else{loginPopup()}}}else if(job=="campaignCoupon"){}}));$(document).on("click",".estmViewTop button",(function(){var job=$(this).attr("job");var no=$("#estmNextNo").val();var cate=$("#estmNextCate").val();estmWorkRslt(job,no,cate)}));$(document).on("click",".estmMailForm button",(function(){var mail=$(".estmMailForm input[name='mailTo']").val();if(check_Email(mail)){var job=$(this).attr("job");var no=$("#estmNextNo").val();var cate=$("#estmNextCate").val();estmWorkRslt(job,no,cate)}else{alert("보내실 메일 주소를 입력해 주세요.");$(".estmMailForm input[name='mailTo']").focus()}}));if(lnb=="request"){$(document).on("click","#requestDetail a[id^='estimateDetail_']",(function(){var boxType=$(this).get(0).id.replace("estimateDetail_","");if($("#estimateDetailBox_"+boxType).hasClass("box-info--open")){$("#estimateDetailBox_"+boxType).removeClass("box-info--open");$("#estimateDetailBox_"+boxType).addClass("box-info--close")}else{$("#estimateDetailBox_"+boxType).removeClass("box-info--close");$("#estimateDetailBox_"+boxType).addClass("box-info--open")}}));if($("#requestDetail #detailFIType").val()=="finance"){financialInstrumentDataAjax($("#requestDetail #detailBrandCode").val(),"detailFinance","html")}else if($("#requestDetail #detailFIType").val()=="cash"){financialInstrumentDataAjax($("#requestDetail #detailBrandCode").val(),"detailCash","html")}}$(document).on("click","#financialInstrument li[id^='tab_']",(function(){if($(this).get(0).id=="tab_installment"){$("#financialInstrument li[id^='tab_']").removeClass("tab-box__item--on");$("#financialInstrument #tab_installment").addClass("tab-box__item--on");$("#tab_cash_info").hide();$("#tab_installment_info").show();var consignmentFee=fIPrice.trns;var sellingPrice=fIPrice.total;var maxFiancePrincipal=0;if(!$.isNumeric(consignmentFee)){consignmentFee=0}maxFiancePrincipal=sellingPrice-consignmentFee;$("#financialInstrument #installmentPrincipal").closest(".estimate-pay__prepay").find(".emphasis").html("* "+number_format(number_round(maxFiancePrincipal,1e6,"ceil")/1e6)+"만원 ~ "+number_format(number_round(maxFiancePrincipal,1e4,"floor")/1e4));$("#minInstallmentPrincipal").val(number_round(maxFiancePrincipal,1e6,"ceil")/1e6);$("#maxInstallmentPrincipal").val(number_round(maxFiancePrincipal,1e4,"floor")/1e4);$("#financialInstrument #installmentPrincipal").val(number_round(fIPrice.total-fIPrice.trns,1e4,"floor")/1e4);$("#financialInstrument #financialMonth").val(36);$("#financialInstrument #fullPaymentPrice").text("캐시백 "+number_format($("#financialInstrument #tab_cash").data("price"))+"원");financialInstrumentDataAjax(fIValCode.brnd,$("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type"),"html")}else if($(this).get(0).id=="tab_cash"){$("#financialInstrument li[id^='tab_']").removeClass("tab-box__item--on");$("#financialInstrument #tab_cash").addClass("tab-box__item--on");$("#tab_cash_info").show();$("#tab_installment_info").hide();$("#financialInstrument #cashPayment").closest(".estimate-pay__prepay").find(".emphasis").html("* "+$("#financialInstrument #minCashPayment").val()+"만원 ~ "+number_format(number_round(fIPrice.total,1e4,"floor")/1e4));$("#financialInstrument #maxCashPayment").val(number_round(fIPrice.total,1e4,"floor")/1e4);$("#financialInstrument #cashPayment").val(number_round(fIPrice.total-fIPrice.trns,1e4,"floor")/1e4);$("#slider-range-min-cash").slider("value",$("#financialInstrument #cashPayment").val());$("#financialInstrument #installmentPrice").text("");$("#financialInstrument #installmentRate").text("");$("#financialInstrument #installmentPrincipal").val(number_round(fIPrice.total-fIPrice.trns,1e4,"floor")/1e4);$("#slider-range-min").slider("value",$("#financialInstrument #installmentPrincipal").val());financialInstrumentDataAjax(fIValCode.brnd,$("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type"),"html")}else{if(!$(this).hasClass("tab-box__item--disabled")){if(gnb=="compare"){prodType="R";period=36;priceType=2;leaserentLink="/leaserent/?Work=priceCompare&Trims="+fIValCode.trms+"&ProdType="+prodType+"+&Period="+period+"&PriceType="+priceType}else{if(estmDataLeaserent["T"+fIValCode.trms]||estmDataLeaserent["M"+fIValCode.modl]){var leaserentSet=estmDataLeaserent["M"+fIValCode.modl].split("`");var leaserentLink="";if(estmDataLeaserent["T"+fIValCode.trms]){leaserentSet=estmDataLeaserent["T"+fIValCode.trms].split("`")}leaserentLink="/leaserent/?Work=priceCompare&Trims="+leaserentSet[0]+"&ProdType="+leaserentSet[1]+"+&Period="+leaserentSet[2]+"&PriceType="+leaserentSet[3]}}sendGA("렌트/리스 이동 얼럿","이동");if(mobile){location.href=leaserentLink}else{window.open(leaserentLink)}}}}));$(document).on("click","#financialCont input[id^='financialCheckBox_']",(function(){if(!$("input:checkbox[id="+$(this).attr("id")+"]").is(":checked")){$("[id^=financialCheckBox_").prop("checked",false)}else{$("[id^=financialCheckBox_").prop("checked",false);$(this).prop("checked",true)}if($(this).parent().parent().parent("div").hasClass("payinfo-box--on")){$(this).parent().parent().parent("div").removeClass("payinfo-box--on")}else{$(this).parent().parent().parent("div").siblings().removeClass("payinfo-box--on");$(this).parent().parent().parent("div").addClass("payinfo-box--on")}financialCheckBoxClick();setEstimateParam()}));$(document).on("click","#financialInstrument #installmentPrincipalRemove",(function(){$("#financialInstrument #installmentPrincipal").val(0);$("#slider-range-min").slider("value",$("#financialInstrument #installmentPrincipal").val())}));$(document).on("change","#installmentPrincipal",(function(){$("#slider-range-min").slider("value",$("#financialInstrument #installmentPrincipal").val());setEstimateParam()}));$(document).on("change","#financialInstrument #financialMonth",(function(){financialInstrumentDataAjax(fIValCode.brnd,$("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type"),"html")}));$(document).on("click","#financialInstrument #cashPaymentRemove",(function(){$("#financialInstrument #cashPayment").val(0);$("#slider-range-min-cash").slider("value",$("#financialInstrument #cashPayment").val())}));$(document).on("change","#financialInstrument #cashPayment",(function(){$("#slider-range-min-cash").slider("value",$("#financialInstrument #cashPayment").val());setEstimateParam()}));$(document).on("click","#financialCont a[id^='primeRateBtn_']",(function(){var financialInstrumentsSeq=$(this).get(0).id.replace("primeRateBtn_","");if($(this).hasClass("open")){$(this).removeClass("open");$("#financialCont #primeRateCont_"+financialInstrumentsSeq).removeClass("payinfo-box__rate--open")}else{$(this).addClass("open");$("#financialCont #primeRateCont_"+financialInstrumentsSeq).addClass("payinfo-box__rate--open")}}));$(document).on("click","#financialCont a[id^='showDetailContBtn_'],button[id^='showDetailContBtn_']",(function(){var financialInstrumentsSeq=$(this).get(0).id.replace("showDetailContBtn_","");if($(this).hasClass("open")){$(this).removeClass("open");$("#financialCont #showDetailCont_"+financialInstrumentsSeq).removeClass("payinfo-box__product--open")}else{$(this).addClass("open");$("#financialCont #showDetailCont_"+financialInstrumentsSeq).addClass("payinfo-box__product--open")}}));$(document).on("click","#financialCont input[id^='primeRateCheckBox_']",(function(){var financialInstrumentsSeq=$(this).get(0).id.split("_")[1];var selectRate=0;$("#primeRateCont_"+financialInstrumentsSeq+" input[id^='primeRateCheckBox_']:checked").each((function(){var value=$(this).val();var valueArray=$(this).val().split(".");var valueToFix=0;if(valueArray.length>=2){valueToFix=10**valueArray[1].length}else if(valueArray.length==1){valueToFix=1}if(selectRate==0){selectRate=value}else{var selectRateValueArray=selectRate.split(".");var selectToFix=0;if(selectRateValueArray.length>=2){selectToFix=10**selectRateValueArray[1].length}else if(selectRateValueArray.length==1){selectToFix=1}if(selectToFix>=valueToFix){selectRate=(selectRate*selectToFix+value*valueToFix)/selectToFix+""}else{selectRate=(selectRate*selectToFix+value*valueToFix)/valueToFix+""}}}));var interestRate=$("#financialCheckBox_"+financialInstrumentsSeq).data("rate")+"";var interestRateArray=interestRate.split(".");var interestRateToFix=0;if(interestRateArray.length>=2){interestRateToFix=10**interestRateArray[1].length}else if(interestRateArray.length==1){interestRateToFix=1}var setValue=0;if(selectRate==0){setValue=interestRate}else{var selectRateValueArray=selectRate.split(".");var selectToFix=0;if(selectRateValueArray.length>=2){selectToFix=10**selectRateValueArray[1].length}else if(selectRateValueArray.length==1){selectToFix=1}if(selectToFix>=interestRateToFix){setValue=(interestRate*selectToFix-selectRate*selectToFix)/selectToFix+"";if((interestRate*selectToFix-selectRate*selectToFix)/selectToFix==0){setValue+=String(selectToFix).replace("1",".")}}else{setValue=(interestRate*interestRateToFix-selectRate*interestRateToFix)/interestRateToFix+"";if((interestRate*interestRateToFix-selectRate*interestRateToFix)%interestRateToFix==0){setValue+=String(interestRateToFix).replace("1",".")}}}$("#interestRate_"+financialInstrumentsSeq).text(setValue+"%");$("#spanInterestRate_"+financialInstrumentsSeq).text(setValue+"%");var financialMonthVal=$("#financialMonth").val();var installmentPrincipal=$("#installmentPrincipal").val()*1e4;var monthInstallmentPrincipal=number_round(finance_payment(financialMonthVal,setValue,installmentPrincipal,0),1,"floor");$("#monthInstallmentPrincipal_"+financialInstrumentsSeq).text(number_format(monthInstallmentPrincipal));financialCheckBoxClick()}));$(document).on("click",".purchaseCondition",(function(){var templateWrap="";var layoutCss="";var titleTemplate="";var adTemplate="";var applyBtnTemplate="";var insureScript="";insureScript=$("#domesticInsureScript").html();if(valCode.brnd>340){insureScript=$("#importInsureScript").html()}if(mobile){openLayerPopup("dim","구매조건 선택");templateWrap=".g-layer__cont";layoutCss="estimate-pay__layer";titleTemplate="<strong class='point'>다나와제휴사</strong>로<br>결제하면 다양한 <strong class='point'>추가 혜택을</strong><br>받을 수 있습니다.";adTemplate="<div class='right'><div class='sendGA adver' data-actionlabel='내 보험료 계산하기`타이틀 우측'>"+insureScript+"</div></div>"}else{openPopup2("구매조건 선택","825","selfId",$(this));templateWrap="#popup_data";$(templateWrap).css("overflow-y","auto");$(templateWrap).height(835);titleTemplate="다나와 제휴 상품을 이용하면 다양한 추가 혜택을 받을 수 있습니다.";adTemplate="<div class='adver'>"+insureScript+"</div>";applyBtnTemplate="<div class='input_apply'><button type='button' id='installmentPrincipalApply' class='apply_btn'>적용</button></div>"}var index=Number($(this).parents("td").get(0).id.replace("Finc_",""))-1;var minPrice=$("#minPrice").val();var template="<div class='pop_content' id='autodanawa_content'>"+"<div class='estimate-pay "+layoutCss+"' id='financialInstrument'>"+"<div class='estimate__title'>"+"<h3 class='title'>"+titleTemplate+"</h3>"+adTemplate+"</div>"+"<div class='estimate-pay__info'><span class='txt'>선택한 결제 방법은 상담 시 안내용도로만 사용되며, 스팸성 상담 연락을 드리지 않습니다.</span></div>"+"<div class='estimate-pay__tab'>"+"<ul class='tab-box'>"+"<li class='tab-box__item tab-box__item--on' id='tab_installment' data-type='finance' data-actionlabel='결제방법 탭`할부'><a href='javascript:void(0);' class='link'><span class='pay-type'>할부</span><div class='info'><span class='txt' id='installmentPrice'></span><span class='subtxt' id='installmentRate'></span></div></a></li>"+"<li class='tab-box__item ' id='tab_cash' data-type='cash' data-actionlabel='결제방법 탭`일시불'><a href='javascript:void(0);' class='link'><span class='pay-type'>일시불</span><div class='info'><span class='txt' id='fullPaymentPrice'></span></div></a></li>"+"<li class='tab-box__item ' id='tab_rentLease' data-type='leaserent' data-actionlabel='결제방법 탭`렌트/리스'><a href='javascript:void(0);' class='link'><span class='pay-type newwindow'>렌트/리스</span><div class='info'><span class='txt' id='rentLeasePrice'></span></div></a></li>"+"</ul>"+"</div>"+"<div class='estimate-pay__installment' id='tab_installment_info'>"+"<div class='estimate-pay__prepay'>"+"<div class='title'>"+"<h4 class='txt'>할부원금</h4>"+"</div>"+"<div class='content'>"+"<div class='prepay_area'>"+"<div class='slider_area'>"+"<div id='slider-range-min' class='ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content'><div class='ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min' ></div><span tabindex='0' class='ui-slider-handle ui-corner-all ui-state-default'></span></div>"+"</div>"+"<div class='input_area'>"+"<div class='inputbox'>"+"<input type='number' title='할부원금 입력' id='installmentPrincipal'>"+"<input type='hidden' id='minInstallmentPrincipal' value='0'>"+"<input type='hidden' id='maxInstallmentPrincipal' value='0'>"+"<span class='txt'>만원</span>"+"<a href='javascript:void(0);' class='clear' id='installmentPrincipalRemove'>입력내용 삭제</a>"+"</div>"+applyBtnTemplate+"<p class='tip'><span class='emphasis'>* 30만원 ~ 2,958만 원</span>만원까지 입력 가능 </p>"+"</div>"+"</div>"+"</div>"+"</div>"+"<div class='estimate-pay__month'>"+"<div class='title'>"+"<h4 class='txt'>할부기간</h4>"+"</div>"+"<div class='content'>"+"<div class='selectbox'>"+"<label for='financialMonth' class='hide'><span class=''>할부선택</span></label>"+"<select id='financialMonth' title='할부기간 선택'>"+"<option value='12'>12개월</option>"+"<option value='24'>24개월</option>"+"<option value='36' selected>36개월</option>"+"<option value='48'>48개월</option>"+"<option value='60'>60개월</option>"+"<option value='72'>72개월</option>"+"<option value='84'>84개월</option>"+"<option value='96'>96개월</option>"+"<option value='108'>108개월</option>"+"<option value='120'>120개월</option>"+"</select>"+"</div>"+"</div>"+"</div>"+"</div>"+"<div class='estimate-pay__installment' id='tab_cash_info' style='display:none;'>"+"<div class='estimate-pay__prepay'>"+"<div class='title'>"+"<h4 class='txt'>카드결제</h4>"+"</div>"+"<div class='content'>"+"<div class='prepay_area'>"+"<div class='slider_area'>"+"<div id='slider-range-min-cash' class='ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content'><div class='ui-slider-range ui-corner-all ui-widget-header ui-slider-range-min'></div><span tabindex='0' class='ui-slider-handle ui-corner-all ui-state-default'></span></div>"+"</div>"+"<div class='input_area'>"+"<div class='inputbox'>"+"<input type='number' title='카드결제금액 입력' id='cashPayment'>"+"<input type='hidden' id='minCashPayment' value='"+minPrice+"'>"+"<input type='hidden' id='maxCashPayment' value='0'>"+"<span class='txt'>만원</span>"+"<a href='javascript:void(0);' class='clear' id='cashPaymentRemove'>입력내용 삭제</a>"+"</div>"+applyBtnTemplate+"<p class='tip'><span class='emphasis'>* 30만원 ~ 2,958만 원</span>만원까지 입력 가능 </p>"+"</div>"+"</div>"+"</div>"+"</div>"+"</div>"+"<div class='estimate__cont'>"+"<div class='article-box'>"+"<div class='article-box__cont' id='financialCont'>"+"</div>"+"</div>"+"</div>"+"<div class='estimate-pay__btn'><a href='javascript:void(0);' id='estimatePayConfirm-"+$(this).parents("td").get(0).id.replace("Finc_","")+"' class='btn_confirm'>확인</a></div>"+"</div>"+"</div>";$(templateWrap).html(template);fIValCode=valCodeArray[index];fIPrice=priceArray[index];setFinancialInstrumentInitialization();$("#financialCont").find("#multSelectCont").show();setTimeout((function(){$("#financialCont").find("#multSelectCont").css("display","none")}),5e3)}));$(document).on("click","#financialInstrument a[id^='estimatePayConfirm-']",(function(){if($("#financialInstrument input[id^='financialCheckBox_']:checked").length==0){if(mobile){$(".rightfix__top-go").removeClass("hide");$("#layerPopup").find(".g-layer__cont").scrollTop(0).empty();$("#layerPopup").addClass("off").removeClass("g-layer--full g-layer--aside g-layer--aside-short");$("html, body").removeClass("disable-scroll").off("scroll touchmove mousewheel");$("body").css("paddingRight","0");return false}else{$("#autodanawa_popup").addClass("off");$("#autodanawa_popup .data").empty();return false}}var ebox=$(this).get(0).id.replace("estimatePayConfirm-","");var installmentPrincipal=0;var monthTemplate="";var installmentPrincipalText="";if($("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type")=="finance"){installmentPrincipal=$("#financialInstrument #installmentPrincipal").val();if(_.isEmpty(installmentPrincipal)||installmentPrincipal=="0"){$("#financialInstrument #installmentPrincipal").focus();return false}installmentPrincipalText="할부원금";financialMonth=$("#financialInstrument #financialMonth").val();var eRsltPayMon=Number($("#financialInstrument #installmentPrice").attr("price"));$("#PayM_"+ebox+" .eRsltPayMon").attr("price",eRsltPayMon);$("#PayM_"+ebox+" .eRsltPayMon").text(number_format(eRsltPayMon));var eRsltPayCash=Number($("#Psum_"+ebox+" .eRsltPriceSum").attr("price"))-Number(installmentPrincipal*1e4)+Number($("#Esum_"+ebox+" .eRsltRegiSum").attr("price"));$("#Cash_"+ebox+" .eRsltPayCash").attr("price",eRsltPayCash);$("#Cash_"+ebox+" .eRsltPayCash").text(number_format(eRsltPayCash));$("#Cash_"+ebox+" .eRsltTxtPayCash").text("선수금+등록비");var eRsltPayMonth=eRsltPayMon*financialMonth;$("#Month_"+ebox+" .eRsltTxtPayMonth").text("월 "+number_format(eRsltPayMon)+" * "+financialMonth+"회");$("#Month_"+ebox+" .eRsltPayMonth").attr("price",eRsltPayMonth);$("#Month_"+ebox+" .eRsltPayMonth").text(number_format(eRsltPayMonth));$("#Finc_"+ebox+" .selectFincTab").val("FincS");$("#Finc_"+ebox+" .installmentPrincipal").val(installmentPrincipal);$("#Finc_"+ebox+" .installmentMonth").val(financialMonth);$("#Finc_"+ebox+" .rate").val($("#financialInstrument #installmentRate").attr("rate"));$("#Finc_"+ebox+" .monthlyPayment").val(eRsltPayMon);monthTemplate="<div class='fincinfo_row'>"+"<div class='title'>할부기간 :</div>"+"<div class='cont'><span class='num'>"+financialMonth+"</span>개월</div>"+"</div>"}else if($("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type")=="cash"){installmentPrincipal=$("#financialInstrument #cashPayment").val();if(_.isEmpty(installmentPrincipal)||installmentPrincipal=="0"){$("#financialInstrument #cashPayment").focus();return false}installmentPrincipalText="카드결제";var eRsltPayCash=Number($("#Psum_"+ebox+" .eRsltPriceSum").attr("price"))+Number($("#Esum_"+ebox+" .eRsltRegiSum").attr("price"));$("#Cash_"+ebox+" .eRsltPayCash").attr("price",eRsltPayCash);$("#Cash_"+ebox+" .eRsltPayCash").text(number_format(eRsltPayCash));$("#Cash_"+ebox+" .eRsltTxtPayCash").text("차량가+등록비");$("#Finc_"+ebox+" .selectCashBackPrice").val(Number($("#financialInstrument #fullPaymentPrice").attr("price")));$("#Finc_"+ebox+" .selectFincTab").val("CashS");$("#Finc_"+ebox+" .installmentPrincipal").val(installmentPrincipal);$("#PayM_"+ebox+" .eRsltPayMon").attr("price",0);$("#PayM_"+ebox+" .eRsltPayMon").text(number_format(0));$("#Month_"+ebox+" .eRsltTxtPayMonth").text("해당없음");$("#Month_"+ebox+" .eRsltPayMonth").attr("price",0);$("#Month_"+ebox+" .eRsltPayMonth").text(number_format(0))}var instalmentGoodsName="";var instalmentGoodsRate="";var listTemplate="";$("#financialInstrument input[id^='financialCheckBox_']:checked").each((function(){var financialInstrumentsSeq=$(this).get(0).id.replace("financialCheckBox_","");listTemplate+="<li class='item'><span class='title'>"+$(this).next().text()+"</span></li>";if(instalmentGoodsName==""){instalmentGoodsName=$("label[for='"+$(this).get(0).id+"']").text();instalmentGoodsRate=$(this).data("rate")}else{instalmentGoodsName+=","+$("label[for='"+$(this).get(0).id+"']").text();instalmentGoodsRate+=","+$(this).data("rate")}}));$("#Finc_"+ebox+" .instalmentGoodsName").val(instalmentGoodsName);$("#Finc_"+ebox+" .instalmentGoodsRate").val(instalmentGoodsRate);var template="<div class='fincinfo_row'>"+"<div class='title'>"+installmentPrincipalText+" :</div>"+"<div class='cont'><span class='num'>"+number_format(installmentPrincipal)+"</span>만원</div>"+"</div>"+monthTemplate+"<div class='fincinfo_item'>"+"<div class='title'>선택한 제휴상품</div>"+"<div class='cont'><a href='javascript:void(0);' class='btn_change purchaseCondition'>변경하기</a></div>"+"<ul class='choice_list'>"+listTemplate;"</ul>"+"</div>";$("#Finc_"+ebox+" .formEstmFincinfo").html(template);if(mobile){$(".rightfix__top-go").removeClass("hide");$("#layerPopup").find(".g-layer__cont").scrollTop(0).empty();$("#layerPopup").addClass("off").removeClass("g-layer--full g-layer--aside g-layer--aside-short");$("html, body").removeClass("disable-scroll").off("scroll touchmove mousewheel");$("body").css("paddingRight","0")}else{$("#autodanawa_popup").addClass("off");$("#autodanawa_popup .data").empty()}var eRsltCashGrand=Number($("#Cash_"+ebox+" .eRsltPayCash").attr("price"))+Number($("#Month_"+ebox+" .eRsltPayMonth").attr("price"))+Number($("#Close_"+ebox+" .eRsltPayClose").attr("price"));$("#Grnd_"+ebox+" .eRsltCashGrand").attr("price",eRsltCashGrand);$("#Grnd_"+ebox+" .eRsltCashGrand").text(number_format(eRsltCashGrand))}));$(document).on("click","#financialInstrument #multSelectCloseBtn",(function(){$("#financialCont").find("#multSelectCont").hide()}))}));function setFinancialPrice(){var consignmentFee=fIPrice.trns;var sellingPrice=fIPrice.total;var maxFiancePrincipal=0;if(!$.isNumeric(consignmentFee)){consignmentFee=0}maxFiancePrincipal=sellingPrice-consignmentFee;$("#financialInstrument #installmentPrincipal").closest(".estimate-pay__prepay").find(".emphasis").html("* "+number_format(number_round(maxFiancePrincipal,1e6,"ceil")/1e6)+"만원 ~ "+number_format(number_round(maxFiancePrincipal,1e4,"floor")/1e4));$("#minInstallmentPrincipal").val(number_round(maxFiancePrincipal,1e6,"ceil")/1e6);$("#maxInstallmentPrincipal").val(number_round(maxFiancePrincipal,1e4,"floor")/1e4);$("#slider-range-min").slider("option","min",Number($("#financialInstrument #minInstallmentPrincipal").val()));$("#slider-range-min").slider("option","max",Number($("#financialInstrument #maxInstallmentPrincipal").val()));$("#financialInstrument #cashPayment").closest(".estimate-pay__prepay").find(".emphasis").html("* ~"+number_format(number_round(fIPrice.total,1e4,"floor")/1e4));$("#financialInstrument #maxCashPayment").val(number_round(fIPrice.total,1e4,"floor")/1e4);$("#slider-range-min-cash").slider("option","max",Number($("#financialInstrument #maxCashPayment").val()))}function setFinancialInstrumentInitialization(fIParam){if(_.isUndefined(fIParam)){$("#financialInstrument #tab_installment").trigger("click");$("#financialInstrument #cashPayment").val(number_round(fIPrice.total-fIPrice.trns,1e4,"floor")/1e4);$("#financialInstrument #maxCashPayment").val(number_round(fIPrice.total,1e4,"floor")/1e4);financialInstrumentDataAjax(fIValCode.brnd,"initCashPrice","json");if(gnb!="compare"){if(estmDataLeaserent["T"+fIValCode.trms]||estmDataLeaserent["M"+fIValCode.modl]){var leaserentSet=estmDataLeaserent["M"+fIValCode.modl].split("`");if(estmDataLeaserent["T"+fIValCode.trms]){leaserentSet=estmDataLeaserent["T"+fIValCode.trms].split("`")}$("#tab_rentLease").removeClass("tab-box__item--disabled");$("#tab_rentLease .link").attr("href","javascript:void(0);");$("#rentLeasePrice").text("월 "+number_format(leaserentSet[4])+"원~")}else{$("#tab_rentLease").addClass("tab-box__item--disabled");$("#tab_rentLease .link").removeAttr("href");$("#rentLeasePrice").text("(상품없음)")}}financialInstrumentDataAjax(fIValCode.brnd,"installmentPeriod","html")}else{var fIParamArray=fIParam.split(":");if(fIParamArray.length>=3){var fIType=fIParamArray[0];var fISeqs=fIParamArray[1];var fISeqArray=new Array;var fIPriceMonths=fIParamArray[2];if(!_.isEmpty(fISeqs)){fISeqArray=fISeqs.split(",")}if(fIType=="finance"){var fIPriceParam=0;var fIMonthParam=0;var fIPriceMonthArray=fIPriceMonths.split(",");if(fIPriceMonthArray.length>=2){fIPriceParam=fIPriceMonthArray[0];fIMonthParam=fIPriceMonthArray[1]}var consignmentFee=fIPrice.trns;var sellingPrice=fIPrice.total;var maxFiancePrincipal=0;if(!$.isNumeric(consignmentFee)){consignmentFee=0}maxFiancePrincipal=sellingPrice-consignmentFee;$("#financialInstrument #installmentPrincipal").closest(".estimate-pay__prepay").find(".emphasis").html("* "+number_format(number_round(maxFiancePrincipal,1e6,"ceil")/1e6)+"만원 ~ "+number_format(number_round(maxFiancePrincipal,1e4,"floor")/1e4));$("#minInstallmentPrincipal").val(number_round(maxFiancePrincipal,1e6,"ceil")/1e6);$("#maxInstallmentPrincipal").val(number_round(maxFiancePrincipal,1e4,"floor")/1e4);if(number_round(maxFiancePrincipal,1e6,"ceil")/1e6<=fIPriceParam&&fIPriceParam<=number_round(maxFiancePrincipal,1e4,"floor")/1e4){$("#financialInstrument #installmentPrincipal").val(fIPriceParam)}else{$("#financialInstrument #installmentPrincipal").val(number_round(fIPrice.total-fIPrice.trns,1e4,"floor")/1e4)}if(12<=fIMonthParam&&fIMonthParam<=120){$("#financialInstrument #financialMonth").val(fIMonthParam)}else{$("#financialInstrument #financialMonth").val(36)}financialInstrumentDataAjax(fIValCode.brnd,$("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type"),"html");$("#financialInstrument #cashPayment").val(number_round(fIPrice.total-fIPrice.trns,1e4,"floor")/1e4);financialInstrumentDataAjax(fIValCode.brnd,"initCashPrice","json");financialInstrumentDataAjax(fIValCode.brnd,"installmentPeriod","html");$("#financialInstrument #maxCashPayment").val(number_round(fIPrice.total,1e4,"floor")/1e4)}else if(fIType=="cash"){$("#financialInstrument li[id^='tab_']").removeClass("tab-box__item--on");$("#financialInstrument #tab_cash").addClass("tab-box__item--on");$("#tab_cash_info").show();$("#tab_installment_info").hide();$("#financialInstrument #maxCashPayment").val(number_round(fIPrice.total,1e4,"floor")/1e4);if(fIPriceMonths<=number_round(fIPrice.total,1e4,"floor")/1e4){$("#financialInstrument #cashPayment").val(fIPriceMonths)}else{$("#financialInstrument #cashPayment").val(number_round(fIPrice.total-fIPrice.trns,1e4,"floor")/1e4)}$("#financialInstrument #cashPayment").closest(".estimate-pay__prepay").find(".emphasis").html("* "+$("#financialInstrument #minCashPayment").val()+"만원 ~ "+number_format(number_round(fIPrice.total,1e4,"floor")/1e4));financialInstrumentDataAjax(fIValCode.brnd,$("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type"),"html");financialInstrumentDataAjax(fIValCode.brnd,"initCashPrice","json");var sellingPrice=fIPrice.total;var maxFiancePrincipal=0;if(!$.isNumeric(consignmentFee)){consignmentFee=0}maxFiancePrincipal=sellingPrice-consignmentFee;$("#financialInstrument #installmentPrincipal").closest(".estimate-pay__prepay").find(".emphasis").html("* "+number_format(number_round(maxFiancePrincipal,1e6,"ceil")/1e6)+"만원 ~ "+number_format(number_round(maxFiancePrincipal,1e4,"floor")/1e4));$("#minInstallmentPrincipal").val(number_round(maxFiancePrincipal,1e6,"ceil")/1e6);$("#maxInstallmentPrincipal").val(number_round(maxFiancePrincipal,1e4,"floor")/1e4);$("#installmentPrincipal").val(number_round(fIPrice.total-fIPrice.trns,1e4,"floor")/1e4)}if(gnb!="compare"){if(estmDataLeaserent["T"+fIValCode.trms]||estmDataLeaserent["M"+fIValCode.modl]){var leaserentSet=estmDataLeaserent["M"+fIValCode.modl].split("`");if(estmDataLeaserent["T"+fIValCode.trms]){leaserentSet=estmDataLeaserent["T"+fIValCode.trms].split("`")}$("#tab_rentLease").removeClass("tab-box__item--disabled");$("#tab_rentLease .link").attr("href","javascript:void(0);");$("#rentLeasePrice").text("월 "+number_format(leaserentSet[4])+"원~")}else{$("#tab_rentLease").addClass("tab-box__item--disabled");$("#tab_rentLease .link").removeAttr("href");$("#rentLeasePrice").text("(상품없음)")}}$.each(fISeqArray,(function(key,item){$("#financialCheckBox_"+item).prop("checked",true);$("#financialCheckBox_"+item).parent().parent().parent("div").addClass("payinfo-box--on");financialCheckBoxClick()}))}}$("#slider-range-min").slider({range:"min",value:Number($("#installmentPrincipal").val()),min:Number($("#minInstallmentPrincipal").val()),max:Number($("#maxInstallmentPrincipal").val()),slide:function(event,ui){$("#installmentPrincipal").val(ui.value);setEstimateParam()},change:function(event,ui){if(installmentPrincipalCheck()){financialInstrumentDataAjax(fIValCode.brnd,$("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type"),"html");financialInstrumentDataAjax(fIValCode.brnd,"installmentPeriod","html")}}});$("#slider-range-min-cash").slider({range:"min",value:Number($("#financialInstrument #cashPayment").val()),min:Number(0),max:Number($("#maxCashPayment").val()),slide:function(event,ui){$("#cashPayment").val(ui.value);setEstimateParam()},change:function(event,ui){if(cashPaymentCheck()){financialInstrumentDataAjax(fIValCode.brnd,$("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type"),"html")}}})}function financialCheckBoxClick(){var minimumValue="";var minimumRate="";var minimumRateValue=0;$("input[id^='financialCheckBox_']:checked").each((function(){var financialInstrumentsSeq=$(this).get(0).id.replace("financialCheckBox_","");var monthInstallmentPrincipal=$("#monthInstallmentPrincipal_"+financialInstrumentsSeq).text();if(minimumValue==""){minimumValue=monthInstallmentPrincipal;minimumRate=$("#spanInterestRate_"+financialInstrumentsSeq).text();minimumRateValue=$(this).data("rate")}else{if($("#financialInstrument #tab_installment").hasClass("tab-box__item--on")){if(Number(removeComma(minimumValue))>Number(removeComma(monthInstallmentPrincipal))){minimumValue=monthInstallmentPrincipal;minimumRate=$("#spanInterestRate_"+financialInstrumentsSeq).text();minimumRateValue=$(this).data("rate")}}else if($("#financialInstrument #tab_cash").hasClass("tab-box__item--on")){if(Number(removeComma(minimumValue))<Number(removeComma(monthInstallmentPrincipal))){minimumValue=monthInstallmentPrincipal;minimumRate=$("#spanInterestRate_"+financialInstrumentsSeq).text();minimumRateValue=$(this).data("rate")}}}}));if($("#financialInstrument #tab_installment").hasClass("tab-box__item--on")){if(minimumValue==""){$("#installmentPrice").text(minimumValue)}else{$("#installmentPrice").text("월 "+minimumValue+"원~")}$("#financialInstrument #installmentPrice").attr("price",minimumValue.replace(/,/g,""));$("#installmentRate").text(minimumRate);$("#financialInstrument #installmentRate").attr("rate",minimumRateValue)}else if($("#financialInstrument #tab_cash").hasClass("tab-box__item--on")){if(minimumValue==""){minimumValue=number_format($("#financialInstrument #tab_cash").data("price"))}$("#fullPaymentPrice").text("캐시백 "+minimumValue+"원");$("#financialInstrument #fullPaymentPrice").attr("price",minimumValue.replace(/,/g,""))}}function installmentPrincipalCheck(){var checkValue=true;var val=$("#installmentPrincipal").val()*1e4;var consignmentFee=fIPrice.trns;var sellingPrice=fIPrice.total;var maxFiancePrincipal=0;if(!$.isNumeric(consignmentFee)){consignmentFee=0}maxFiancePrincipal=sellingPrice-consignmentFee;if(maxFiancePrincipal/100>val||val>maxFiancePrincipal){alert("할부원금 금액은 "+number_format(number_round(maxFiancePrincipal,1e6,"ceil")/1e6)+"만원 ~ "+number_format(number_round(maxFiancePrincipal,1e4,"floor")/1e4)+"만원으로 설정해 주시기 바랍니다.");checkValue=false}sendGA("할부원금","클릭");return checkValue}function cashPaymentCheck(){var checkValue=true;var val=$("#cashPayment").val()*1e4;if(val>fIPrice.total){alert("일시불 결제는 차량가격을 넘을수 없습니다.");checkValue=false}sendGA("카드결제금액","클릭");return checkValue}function financialInstrumentDataAjax(brandCode,listType,dataType){var ajaxData={};var paymentAmount=0;var month=$("#financialInstrument #financialMonth").val();var maxPaymentAmount=0;if(listType=="finance"){paymentAmount=$("#financialInstrument #installmentPrincipal").val();maxPaymentAmount=$("#financialInstrument #maxInstallmentPrincipal").val()}else if(listType=="cash"){paymentAmount=$("#financialInstrument #cashPayment").val();maxPaymentAmount=$("#financialInstrument #maxCashPayment").val()}else if(listType=="installmentPeriod"){paymentAmount=$("#financialInstrument #installmentPrincipal").val()}else if(listType=="initCashPrice"){paymentAmount=$("#financialInstrument #cashPayment").val();if(gnb=="compare"){ajaxData["modelCode"]=fIValCode.modl;ajaxData["trimsCode"]=fIValCode.trms}}else if(listType=="detailFinance"){paymentAmount=$("#requestDetail #installmentPrincipal").val();month=$("#requestDetail #financialMonth").val()}else if(listType=="detailCash"){paymentAmount=$("#requestDetail #installmentPrincipal").val()}ajaxData["brandCode"]=brandCode;ajaxData["listType"]=listType;ajaxData["paymentAmount"]=paymentAmount;ajaxData["month"]=month;ajaxData["dataType"]=dataType;ajaxData["maxPaymentAmount"]=maxPaymentAmount;$.ajax({type:"POST",url:webUrl+"/service/ajax_financialInstruments_list.php",dataType:dataType,data:ajaxData,async:false,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(data){if(listType=="finance"){$("#financialInstrument #financialCont").html(data)}else if(listType=="cash"){$("#financialInstrument #financialCont").html(data)}else if(listType=="installmentPeriod"){var financialMonthVal=$("#financialInstrument #financialMonth").val();$("#financialInstrument #financialMonth").html(data);$("#financialInstrument #financialMonth").val(financialMonthVal)}else if(listType=="initCashPrice"){$("#financialInstrument #fullPaymentPrice").text("캐시백 "+number_format(data.cashPrice)+"원");$("#financialInstrument #fullPaymentPrice").attr("price",data.cashPrice);$("#financialInstrument #tab_cash").attr("data-price",data.cashPrice);if(gnb=="compare"){if(_.isNull(data.aLeaseRentTrimsList)||_.isEmpty(data.aLeaseRentTrimsList.nMonthPayment)){$("#tab_rentLease").addClass("tab-box__item--disabled");$("#tab_rentLease .link").removeAttr("href");$("#rentLeasePrice").text("(상품없음)")}else{$("#tab_rentLease").removeClass("tab-box__item--disabled");$("#tab_rentLease .link").attr("href","javascript:void(0);");$("#rentLeasePrice").text("월 "+number_format(data.aLeaseRentTrimsList.nMonthPayment)+"원~")}}}else if(listType=="detailFinance"||listType=="detailCash"){var template="";if(data!=""){template="<dl class='box-info__item box-info--open' id='estimateDetailBox_financialInstruments'>"+"<dt class='box-info__header'><a href='javascript:void(0);' id='estimateDetail_financialInstruments' class='btn-toggle btn-benefit'>제휴사 구매 혜택</a></dt>"+"<dd class='box-info__cont' id='financialCont'>"+"<div class='box-info__benefit'>"+data+"</div>"+"<dd>"+"</dl>"}$("#requestDetail #requstContBoxInfo").append(template)}}})}function financialInstrumentsCheck(ebox){if(_.isEmpty($("#Finc_"+ebox+" .selectFincTab").val())){return false}else{return true}}function setEstimateParam(){if(gnb=="newcar"){var financialInfo="";var financialInstrumentType=$("#financialInstrument li[id^='tab_'].tab-box__item--on").data("type");var financialSeqs="";$("#financialInstrument input[id^='financialCheckBox_']:checked").each((function(){if(financialSeqs==""){financialSeqs+=$(this).get(0).id.replace("financialCheckBox_","")}else{financialSeqs+=","+$(this).get(0).id.replace("financialCheckBox_","")}}));financialInfo=financialInstrumentType+":"+financialSeqs;if(financialInstrumentType=="finance"){financialInfo+=":"+$("#financialInstrument #installmentPrincipal").val()+","+$("#financialInstrument #financialMonth").val()}else if(financialInstrumentType=="cash"){financialInfo+=":"+$("#financialInstrument #cashPayment").val()}var colorInfo="";var estimateExteriorColor="";$("#estimateColorList #estimateExteriorColorList .choice-color--choice").each((function(){if(_.isEmpty(estimateExteriorColor)){estimateExteriorColor+=$(this).attr("color")}else{estimateExteriorColor+=":"+$(this).attr("color")}}));var estimateInteriorColor="";$("#estimateColorList #estimateInteriorColorList .choice-color--choice").each((function(){if(_.isEmpty(estimateInteriorColor)){estimateInteriorColor+=$(this).attr("color")}else{estimateInteriorColor+=":"+$(this).attr("color")}}));colorInfo=estimateExteriorColor+","+estimateInteriorColor;rsltConf[ebox]=codes.itms+"@"+codes.term+"@"+codes.free+"@"+codes.zone+"@"+codes.othr+"@"+codes.trns+"@"+codes.year+"@"+codes.mile+"@"+ftab+"@"+financialInfo+"@"+colorInfo+"@";$("meta[property='og:url']").attr("content",location.origin+"/newcar/?Work=estimate&Code="+rsltCode[ebox]+"&Conf="+rsltConf[ebox]);$("#metaUrl").val(location.origin+"/newcar/?Work=estimate&Code="+rsltCode[ebox]+"&Conf="+rsltConf[ebox]);window.history.replaceState("견적","신차견적",$("meta[property='og:url']").attr("content"))}}function ajaxSubmit(obj){act=$("#"+obj).attr("action");$.ajax({type:"POST",async:true,url:act,dataType:"json",timeout:3e4,cache:false,crossDomain:true,xhrFields:{withCredentials:true},data:$("#"+obj).serialize(),contentType:"application/x-www-form-urlencoded; charset=UTF-8",error:function(request,status,error){console.dir(request)},success:function(response){jsonRslt=new Array;$.each(response,(function(key,val){jsonRslt[key]=val}));if(jsonRslt["rslt"]=="true"){if(jsonRslt["msg"]=="guestMode"){location.href=jsonRslt["loginUrl"]}else{if(jsonRslt["msg"])alert(jsonRslt["msg"]);if(jsonRslt["rtn"]){if(jsonRslt["rtn"].indexOf("http")==0){if(deviceVS!="0"){var tmp=jsonRslt["rtn"].split("/");fname=tmp[tmp.length-1];window.autoestimatenote.fileDownload(fname,jsonRslt["rtn"])}else{alert(jsonRslt["rtn"])}}else{eval(jsonRslt["rtn"])}}if(obj=="estmWorks")$("#estmWorks").html("")}}else if(jsonRslt["rslt"]=="false"){if(jsonRslt["msg"]=="")alert(jsonRslt["msg"])}}})}function estmWorkRslt(job,no,cate){if(job=="view"){var subject="견적서 보기";if(cate=="estimate"){getHttprequest(webUrl+"/service/ajax_estimate_viewer.php?sNo="+no+"&Job="+job,"popup_data")}else if(cate=="leaserent"){var tmp=no.split("_");getHttprequest(webUrl+"/service/ajax_leaserent_viewer.php?Job=view&fNo="+tmp[0]+"&vNo="+tmp[1],"popup_data")}if(gnb=="estimate")openPopup(subject,750,".estimateBox .step");else openPopup(subject,750,"");if(mobile){var popupW=$("#popup_data").width();var popupTH=$("#popup_data .estmViewFrame .estmFormBox table").height();if(popupW<710){var popupScale=popupW/710;var popupH=popupTH*popupScale;$("#popup_data .estmViewFrame .estmFormBox").css("transform","scale("+popupScale+")");$("#popup_data .estmViewFrame .estmFormBox").css("height",popupH+"px");$("#popup_data .estmViewFrame .estmFormBox table").css("margin-bottom","10px")}}}else if(job=="request"){if(!cate){if(ftab=="CashS")cate="estimate";else if(ftab=="FincS")cate="estimate";else if(ftab=="LeasS")cate="LeasS";else if(ftab=="RentS")cate="RentS"}if(number_only(no)==0){ebox=estmAct;no=rsltCode[ebox]+"^"+rsltName[ebox]+"^"+cate;cate="model"}var txt="";txt+='<input type="text" name="Cate" value="'+cate+'" />';txt+='<input type="text" name="Cont" value="'+no+'" />';$("#estmWorks").html(txt);var code="";if(mobile){if(typeof rsltCode!="undefined"){code=rsltCode[ebox]}else{code=$("#estmCode").val()}}else{if(typeof rsltCode!="undefined"&&rsltCode[ebox]!=undefined){code=rsltCode[ebox]}else{code=$("#estmCode").val()}}if(useCall){$("#estmWorks").attr("action","/newcar/?Work=simpleEstimate&Tab=detail&From=simulation&useCall=2&Code="+code+"&Cate="+cate+"&Cont="+no+"&refer="+gnb)}else{getHttprequest("/newcar/simpleEstimate.php?Tab=detail&From=simulation&useCall=2&Code="+code+"&Cate="+cate+"&Cont="+no+"&refer="+gnb,"layerPopup .g-layer__cont");openLayerPopup("dim","견적 요청 정보 입력",undefined,"popups");return}if(gnb=="estimate"){$("#estmWorks").attr("target","_blank")}else{$("#estmWorks").attr("target","")}$("#estmWorks").submit()}else if(job=="mail"){var subject="견적서 메일 발송";var title=$("#estmNextTitle").val();txt="<div class='estmMailForm'>"+"<dl>"+"<dt class='noLine'>메일 주소</dt>"+"<dd class='noLine'><input type='text' name='mailTo' id='mailTo' size='30' value=''></dd>"+"<dt>메일 제목</dt>"+"<dd class='subj'>"+title+"</dd>"+"<dt>메일 메모</dt>"+"<dd><textarea name='memo'></textarea></dd>"+"<dt>발송 안내</dt>"+"<dd class='cmnt'>"+"* 다나와자동차 발송전용 메일(auto@cowave.kr)에서 발송됩니다.<br />"+"* 메일 서버에 따라 스팸편지함에 들어갈 수 있습니다.<br />"+"* 내용의 일부만 표시될 경우 [표시하기] 또는 [보기]를 클릭해주세요."+"</dd>"+"</dl>"+"<div class='btn'><button type='button' class='button blue' job='mailSend'>발송 하기</button></div>"+"</div>";$("#help_data").html(txt);openHelp(subject,500,"")}else if(job=="mailSend"){var txt="";txt+='<input type="text" name="mailTo" value="'+$(".estmMailForm input[name='mailTo']").val()+'" />';txt+='<input type="text" name="subj" value="'+$(".estmMailForm .subj").text()+'" />';txt+='<input type="text" name="memo" value="'+$(".estmMailForm textarea[name='memo']").val()+'" />';$("#estmWorks").html(txt);if(cate=="cash"||cate=="finance"||cate=="estimate"){$("#estmWorks").attr("action",webUrl+"/service/ajax_estimate_viewer.php?sNo="+no+"&Job="+job)}else if(cate=="lease"||cate=="rent"||cate=="LeasS"||cate=="RentS"){$("#estmWorks").attr("action","/leaserent/make.php?r="+no+"&Job="+job)}$("#estmWorks").attr("target","");ajaxSubmit("estmWorks")}else if(job=="mailSendRtn"){alert("메일이 발송되었습니다.");$("#autodanawa_help").addClass("off")}else if(job=="print"){if(cate=="cash"||cate=="finance"||cate=="estimate")window.open(webUrl+"/service/ajax_estimate_viewer.php?sNo="+no+"&Job="+job);else if(cate=="lease"||cate=="rent"||cate=="LeasS"||cate=="RentS")window.open("/leaserent/make.php?r="+no+"&Job="+job)}else if(job=="tesla"){var sPopupType="";if(mobile)sPopupType="popup";else sPopupType="dim";getHttprequest(webUrl+"/service/ajax_estimate_onlineForm.php?job="+job,"layerPopup .g-layer__cont");$("#layerPopup .g-layer__header").remove();openLayerPopup(sPopupType,"테슬라")}else if(job=="casper"||job=="casperEV"){getHttprequest(webUrl+"/service/ajax_estimate_onlineForm.php?job="+job,"layerPopup .g-layer__cont");openLayerPopup("dim","캐스퍼 신차 견적문의")}}function setDependOption(from,code){if(from=="option"){if($("input.dependOption_"+code).is(":checked")){if(!$("#Optn_1 #estimateColorList #estimateExteriorColorList button[data-optioncode='"+code+"']").hasClass("choice-color--choice")){$("#Optn_1 #estimateColorList #estimateExteriorColorList button[data-optioncode='"+code+"']").click()}}else{$("#Optn_1 #estimateColorList button").each((function(){if($(this).data("optioncode").indexOf(code)!=-1){if($(this).hasClass("choice-color--choice")){$(this).click()}}}))}}else if(from=="estimateExteriorColorList"||from=="estimateInteriorColorList"){if(code==""){$("#"+from+" button").each((function(){if(!$(this).hasClass("choice-color--choice")){if($(this).data("optioncode")){$.each($(this).data("optioncode").split(","),(function(i,vCode){$("#Optn_1 .eChkItemList input.dependOption_"+vCode).prop("checked",false).click().prop("checked",false)}))}}}))}else if(code.split(",").length==1){$("#Optn_1 .eChkItemList input").each((function(){if($(this).hasClass("dependOption_"+code)){if($("#"+from+" button[data-optioncode='"+code+"']").hasClass("choice-color--choice")){if(!$(this).is(":checked")){$(this).prop("checked",true).click().prop("checked",true);openDependOptionPopup($(this).next().find("label").text()+"("+$(this).next().find(".choice__price .num").text()+"만 원)")}}else{$(this).prop("checked",false).click().prop("checked",false)}}}))}else{var existCheckedOption=false;var optionList="";$.each(code.split(","),(function(i,vCode){if($("input.dependOption_"+vCode).is(":checked")){existCheckedOption=true}optionList+="<button type='button' id='choiceDependOption_"+vCode+"' data-code="+$("input.dependOption_"+vCode).attr("code")+" class='button__option btn-close'>"+$("input.dependOption_"+vCode).next().find("label").text()+"</button>"}));if($("#estimateInteriorColorList button[data-optioncode='"+code+"']").hasClass("choice-color--choice")){if(!existCheckedOption&&optionList!=""){openDependOptionChoice(optionList)}}else{$.each(code.split(","),(function(i,vCode){$("input.dependOption_"+vCode).prop("checked",false).click().prop("checked",false)}))}}}}function openFinancialCounsultPopup(){getHttprequest("/service/ajax_financialInstruments_form.php?Code="+rsltCode[ebox],"layerPopup .g-layer__cont");openLayerPopup("dim","상담신청 정보 입력")}