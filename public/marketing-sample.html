<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì¹´ìŠ¤í”¼ë¦¿ ë¬¸ì˜ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ (ë§ˆì¼€íŒ… ì—…ì²´ìš©)</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 500px;
      width: 100%;
      padding: 40px;
    }

    h1 {
      color: #333;
      margin-bottom: 10px;
      font-size: 28px;
    }

    .subtitle {
      color: #666;
      margin-bottom: 30px;
      font-size: 14px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      color: #333;
      font-weight: 600;
      font-size: 14px;
    }

    input, textarea, select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 15px;
      transition: all 0.3s;
    }

    input:focus, textarea:focus, select:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    textarea {
      resize: vertical;
      min-height: 120px;
      font-family: inherit;
    }

    button {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    button:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
    }

    button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .alert {
      padding: 15px;
      border-radius: 10px;
      margin-bottom: 20px;
      display: none;
    }

    .alert.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .alert.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .alert.show {
      display: block;
    }

    .info-box {
      background: #e7f3ff;
      border: 1px solid #b3d9ff;
      border-radius: 10px;
      padding: 15px;
      margin-bottom: 20px;
      font-size: 13px;
      color: #004085;
    }

    .info-box strong {
      display: block;
      margin-bottom: 5px;
    }

    .code-box {
      background: #f5f5f5;
      border-radius: 8px;
      padding: 15px;
      margin-top: 20px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸš— ì¹´ìŠ¤í”¼ë¦¿ ë¬¸ì˜ í…ŒìŠ¤íŠ¸</h1>
    <p class="subtitle">ë§ˆì¼€íŒ… ì—…ì²´ìš© API í…ŒìŠ¤íŠ¸ í˜ì´ì§€</p>

    <div class="info-box">
      <strong>ğŸ“Œ ì•ˆë‚´</strong>
      ì´ í˜ì´ì§€ëŠ” ì¹´ìŠ¤í”¼ë¦¿ ë¬¸ì˜ APIë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ ìƒ˜í”Œì…ë‹ˆë‹¤.<br>
      ì‹¤ì œ ë§ˆì¼€íŒ… í˜ì´ì§€ì— ì ìš© ì‹œ, ì•„ë˜ ì½”ë“œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
    </div>

    <div id="alert" class="alert"></div>

    <form id="inquiryForm">
      <div class="form-group">
        <label for="name">ì´ë¦„ *</label>
        <input
          type="text"
          id="name"
          name="name"
          placeholder="í™ê¸¸ë™"
          required
        >
      </div>

      <div class="form-group">
        <label for="phone">ì—°ë½ì²˜ *</label>
        <input
          type="tel"
          id="phone"
          name="phone"
          placeholder="010-1234-5678"
          required
        >
      </div>

      <div class="form-group">
        <label for="source">ìœ ì… ê²½ë¡œ *</label>
        <select id="source" name="source" required>
          <option value="ë„¤ì´ë²„">ë„¤ì´ë²„</option>
          <option value="ì¹´ì¹´ì˜¤">ì¹´ì¹´ì˜¤</option>
          <option value="í˜ì´ìŠ¤ë¶">í˜ì´ìŠ¤ë¶</option>
          <option value="ì¸ìŠ¤íƒ€ê·¸ë¨">ì¸ìŠ¤íƒ€ê·¸ë¨</option>
          <option value="êµ¬ê¸€">êµ¬ê¸€</option>
          <option value="ê¸°íƒ€">ê¸°íƒ€</option>
        </select>
      </div>

      <div class="form-group">
        <label for="content">ë¬¸ì˜ ë‚´ìš© *</label>
        <textarea
          id="content"
          name="content"
          placeholder="ì˜ˆ) í˜„ëŒ€ ì•„ì´ì˜¤ë‹‰5 ì¥ê¸°ë ŒíŠ¸ ê²¬ì  ë¶€íƒë“œë¦½ë‹ˆë‹¤.&#10;&#10;Â· ì°¨ëŸ‰: ì•„ì´ì˜¤ë‹‰5&#10;Â· ì˜µì…˜: ìµìŠ¤í´ë£¨ì‹œë¸Œ&#10;Â· ìƒ‰ìƒ: ì‚¬ì´ë²„ê·¸ë ˆì´&#10;Â· ê³„ì•½ í˜•íƒœ: ì¥ê¸°ë ŒíŠ¸ 48ê°œì›”"
          required
        ></textarea>
      </div>

      <button type="submit" id="submitBtn">ë¬¸ì˜í•˜ê¸°</button>
    </form>

    <div class="code-box">
      <strong>ğŸ”‘ API Key:</strong> test_api_key_12345<br>
      <strong>ğŸŒ Endpoint:</strong> /api/inquiry/create<br>
      <strong>ğŸ“„ ìì„¸í•œ ë¬¸ì„œ:</strong> MARKETING_API_GUIDE.md ì°¸ê³ 
    </div>
  </div>

  <script>
    const form = document.getElementById('inquiryForm')
    const submitBtn = document.getElementById('submitBtn')
    const alert = document.getElementById('alert')

    function showAlert(message, type) {
      alert.textContent = message
      alert.className = `alert ${type} show`
      setTimeout(() => {
        alert.className = 'alert'
      }, 5000)
    }

    // ì „í™”ë²ˆí˜¸ ìë™ í¬ë§·íŒ…
    document.getElementById('phone').addEventListener('input', (e) => {
      let value = e.target.value.replace(/[^0-9]/g, '')

      if (value.length <= 3) {
        e.target.value = value
      } else if (value.length <= 7) {
        e.target.value = `${value.slice(0, 3)}-${value.slice(3)}`
      } else {
        e.target.value = `${value.slice(0, 3)}-${value.slice(3, 7)}-${value.slice(7, 11)}`
      }
    })

    form.addEventListener('submit', async (e) => {
      e.preventDefault()

      const button = submitBtn
      const originalText = button.textContent
      button.disabled = true
      button.textContent = 'ì „ì†¡ ì¤‘...'

      try {
        const formData = {
          customer_name: document.getElementById('name').value.trim(),
          customer_phone: document.getElementById('phone').value.trim(),
          content: document.getElementById('content').value.trim(),
          source: document.getElementById('source').value
        }

        // ì‹¤ì œ API í˜¸ì¶œ
        const response = await fetch('https://carspirit.vercel.app/api/inquiry/create', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-API-Key': 'test_api_key_12345' // í…ŒìŠ¤íŠ¸ìš© API í‚¤
          },
          body: JSON.stringify(formData)
        })

        const result = await response.json()

        if (response.ok) {
          showAlert(
            `âœ… ë¬¸ì˜ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤! (ë‹´ë‹¹ì: ${result.assigned_to})`,
            'success'
          )
          form.reset()
          console.log('ì‘ë‹µ ë°ì´í„°:', result)
        } else {
          showAlert(`âŒ ì˜¤ë¥˜: ${result.error}`, 'error')
          console.error('ì˜¤ë¥˜ ì‘ë‹µ:', result)
        }
      } catch (error) {
        showAlert('âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error')
        console.error('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜:', error)
      } finally {
        button.disabled = false
        button.textContent = originalText
      }
    })
  </script>
</body>
</html>
