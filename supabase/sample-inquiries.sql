-- 샘플 문의 데이터
-- 주의: 실행 전에 현재 로그인한 사용자의 user_id를 확인하세요!
-- 현재 예시: d72c7bec-e6a8-4029-b2ea-3d96e041ae59 (강동현)

-- 기존 샘플 데이터 삭제 (선택사항)
-- DELETE FROM inquiries;

-- ============================================
-- STEP 1: 가상의 다른 직원들을 users 테이블에 추가
-- 오픈DB용 데이터의 원 소유자들
-- ============================================

-- 김영수
INSERT INTO users (id, email, name, role)
VALUES (
  '11111111-1111-1111-1111-111111111111',
  'kim@carspirit.com',
  '김영수',
  'salesperson'
) ON CONFLICT (id) DO NOTHING;

-- 이지은
INSERT INTO users (id, email, name, role)
VALUES (
  '22222222-2222-2222-2222-222222222222',
  'lee@carspirit.com',
  '이지은',
  'salesperson'
) ON CONFLICT (id) DO NOTHING;

-- 박준형
INSERT INTO users (id, email, name, role)
VALUES (
  '33333333-3333-3333-3333-333333333333',
  'park@carspirit.com',
  '박준형',
  'salesperson'
) ON CONFLICT (id) DO NOTHING;

-- 최수진
INSERT INTO users (id, email, name, role)
VALUES (
  '44444444-4444-4444-4444-444444444444',
  'choi@carspirit.com',
  '최수진',
  'salesperson'
) ON CONFLICT (id) DO NOTHING;

-- 정민호
INSERT INTO users (id, email, name, role)
VALUES (
  '55555555-5555-5555-5555-555555555555',
  'jung@carspirit.com',
  '정민호',
  'salesperson'
) ON CONFLICT (id) DO NOTHING;


-- ============================================
-- STEP 2: 나의문의용 데이터 (최근 7일 이내)
-- 현재 로그인한 사용자 ID: d72c7bec-e6a8-4029-b2ea-3d96e041ae59
-- ============================================
INSERT INTO inquiries (
  user_id,
  customer_name,
  customer_phone,
  content,
  status,
  source,
  assigned_to_name,
  created_at,
  updated_at
) VALUES
  -- 3일 전 신규 문의
  (
    'd72c7bec-e6a8-4029-b2ea-3d96e041ae59',
    '홍길동',
    '010-1111-2222',
    '그랜저 리스 문의합니다. 월 납입금이 얼마나 나올까요?',
    '신규',
    '카스피릿',
    '강동현',
    NOW() - INTERVAL '3 days',
    NOW() - INTERVAL '3 days'
  ),
  -- 2일 전 관리중
  (
    'd72c7bec-e6a8-4029-b2ea-3d96e041ae59',
    '강민지',
    '010-2222-3333',
    '아이오닉5 장기렌트 견적 부탁드립니다. 보조금 받을 수 있나요?',
    '관리',
    '카스피릿',
    '강동현',
    NOW() - INTERVAL '2 days',
    NOW() - INTERVAL '2 days'
  ),
  -- 1일 전 신규 문의
  (
    'd72c7bec-e6a8-4029-b2ea-3d96e041ae59',
    '윤서준',
    '010-3333-4444',
    '싼타페 하이브리드 리스 상담 원합니다. 가족용으로 알아보고 있어요.',
    '신규',
    '카스피릿',
    '강동현',
    NOW() - INTERVAL '1 day',
    NOW() - INTERVAL '1 day'
  ),
  -- 5일 전 심사중
  (
    'd72c7bec-e6a8-4029-b2ea-3d96e041ae59',
    '박소현',
    '010-4444-5555',
    '카니발 장기렌트 심사 중입니다. 결과 기다리고 있어요.',
    '심사',
    '카스피릿',
    '강동현',
    NOW() - INTERVAL '5 days',
    NOW() - INTERVAL '5 days'
  );


-- ============================================
-- STEP 3: 오픈DB용 데이터 (7일 이상 지난 데이터)
-- 다른 직원들의 user_id 사용 (완전히 다른 고객들)
-- ============================================

INSERT INTO inquiries (
  user_id,
  customer_name,
  customer_phone,
  content,
  status,
  source,
  assigned_to_name,
  created_at,
  updated_at
) VALUES
  -- 10일 전 문의 (원 담당자: 김영수)
  (
    '11111111-1111-1111-1111-111111111111',
    '김철수',
    '010-5555-6666',
    '아반떼 장기렌트 견적 문의드립니다. 48개월 조건으로 부탁드립니다.',
    '신규',
    '카스피릿',
    '김영수',
    NOW() - INTERVAL '10 days',
    NOW() - INTERVAL '10 days'
  ),
  -- 8일 전 문의 (원 담당자: 이지은)
  (
    '22222222-2222-2222-2222-222222222222',
    '이영희',
    '010-6666-7777',
    '쏘나타 하이브리드 리스 상담 부탁드립니다. 연비 좋은 걸로요.',
    '관리',
    '카스피릿',
    '이지은',
    NOW() - INTERVAL '8 days',
    NOW() - INTERVAL '8 days'
  ),
  -- 15일 전 문의 (원 담당자: 박준형)
  (
    '33333333-3333-3333-3333-333333333333',
    '박지민',
    '010-7777-8888',
    'K5 장기렌트 문의합니다. 보험료 포함해서 견적 알려주세요.',
    '부재',
    '카스피릿',
    '박준형',
    NOW() - INTERVAL '15 days',
    NOW() - INTERVAL '15 days'
  ),
  -- 12일 전 문의 (원 담당자: 최수진)
  (
    '44444444-4444-4444-4444-444444444444',
    '최민수',
    '010-8888-9999',
    '투싼 장기렌트 견적 문의드립니다. 36개월 기준으로 알려주세요.',
    '심사',
    '카스피릿',
    '최수진',
    NOW() - INTERVAL '12 days',
    NOW() - INTERVAL '12 days'
  ),
  -- 9일 전 문의 (원 담당자: 정민호)
  (
    '55555555-5555-5555-5555-555555555555',
    '정수연',
    '010-9999-0000',
    '카니발 장기렌트 상담 요청합니다. 가족용으로 알아보고 있습니다.',
    '가망',
    '카스피릿',
    '정민호',
    NOW() - INTERVAL '9 days',
    NOW() - INTERVAL '9 days'
  ),
  -- 14일 전 문의 (원 담당자: 김영수)
  (
    '11111111-1111-1111-1111-111111111111',
    '서준호',
    '010-1234-5678',
    '팰리세이드 장기렌트 견적 문의합니다. 최저가로 부탁드립니다.',
    '가망',
    '카스피릿',
    '김영수',
    NOW() - INTERVAL '14 days',
    NOW() - INTERVAL '14 days'
  ),
  -- 11일 전 문의 (원 담당자: 이지은)
  (
    '22222222-2222-2222-2222-222222222222',
    '임하은',
    '010-2345-6789',
    'G80 리스 상담 요청합니다. 임원용으로 알아보고 있습니다.',
    '심사',
    '카스피릿',
    '이지은',
    NOW() - INTERVAL '11 days',
    NOW() - INTERVAL '11 days'
  ),
  -- 20일 전 문의 (원 담당자: 박준형)
  (
    '33333333-3333-3333-3333-333333333333',
    '조은우',
    '010-3456-7890',
    '스포티지 장기렌트 알아보고 있습니다. 견적 부탁드려요.',
    '관리',
    '카스피릿',
    '박준형',
    NOW() - INTERVAL '20 days',
    NOW() - INTERVAL '20 days'
  );


-- ============================================
-- 테스트 시나리오
-- ============================================
-- 1. 나의문의 페이지 (user_id = d72c7bec-e6a8-4029-b2ea-3d96e041ae59만 보임)
--    → 홍길동, 강민지, 윤서준, 박소현 (총 4개)
--
-- 2. 오픈DB 페이지 (다른 user_id + 7일 이상 지난 것만 보임)
--    → 김철수, 이영희, 박지민, 최민수, 정수연, 서준호, 임하은, 조은우 (총 8개)
--    → 전화번호 마스킹: 010-****-****
--
-- 3. 오픈DB에서 잠금 테스트:
--    - "김철수" 문의를 잠금
--    - user_id가 김영수(11111111-...)에서 강동현(d72c7bec-...)으로 변경됨
--    - 나의문의로 리다이렉트
--    - 나의문의에서 "김철수" 확인 (총 5개가 됨)
--    - 오픈DB로 돌아가면 "김철수" 사라짐 (총 7개가 됨)
-- ============================================
